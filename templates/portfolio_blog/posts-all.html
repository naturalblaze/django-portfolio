{% extends "../base/2-col-template.html" %}
{% load static %}
{% block title %}Blog Posts{% endblock %}

{% block content-left %}
<div class="border-bottom border-1 border-dark">
    <div class="container py-5">
        {% for post in posts %}
        <a href="{{ post.get_absolute_url}}" class="text-decoration-none">
            <div class="card border-0 pb-3 pb-sm-5">
                <div class="row">
                    <div class="col-10">
                        <div class="card-body p-0">
                            <div class="pb-2 text-body infscroll-author">{{post.author}}</div>
                            <h1 class="mb-1 text-body fw-bold infscroll-title">{{post.title|truncatechars:80}}</h1>
                            <h2 class="text-muted fs-6 d-none d-sm-block">{{post.subtitle}}</h2>
                            <div class="text-muted infscroll-date">{{post.updated_at|date:"M d"}}</div>
                            <div class="text-muted">{{ post.status }}</div>
                            <div class="text-bold pb-5">Tags: 
                            {% for tag in post.tags.all %}
                                {% if forloop.last %}
                                    <span class="text-muted">{{ tag.name }}</span>
                                {% else %}
                                    <span class="text-muted">{{ tag.name }},</span>
                                {% endif %}
                            {% endfor %}
                            </div>
                        </div>
                    </div>
                    <div class="col-2">
                        {% if post.post_img %}
                            {% with 'portfolio_blog/posts/'|add:post.post_img as image_static %}
                                <img src="{% static image_static %}" class="img-fluid float-end">
                            {% endwith %}
                        {% else %}
                            <img src="{% static 'portfolio_blog/posts/default-post.png' %}" class="img-fluid float-end">
                        {% endif %}
                    </div>
                </div>
            </div>
        </a>
        {% endfor %}
    </div>
</div>
{% endblock %}

{% block content-right %}
{% sidebar_tag_cloud %}
{% endblock %}
